<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Pouchy.html">Pouchy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#add">add</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#all">all</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#bulkGet">bulkGet</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#clear">clear</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#createIndex">createIndex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#createIndicies">createIndicies</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#delete">delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#deleteAll">deleteAll</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#deleteDB">deleteDB</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#find">find</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#getReplicationOptions">getReplicationOptions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#save">save</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pouchy.html#update">update</a></span></li><li class="nav-heading">Events</li><li class="nav-heading"><span class="nav-item-type type-event">E</span><span class="nav-item-name"><a href="global.html#event:hasLikelySynced">hasLikelySynced</a></span></li>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>pouchy</h1><p><a href="https://codeship.com/projects/103658"> <img src="https://codeship.com/projects/723a9160-4203-0133-3599-062894ba1566/status?branch=master" alt="Codeship Status for cdaringe/pouchy"></a> <a href="https://coveralls.io/github/cdaringe/pouchy?branch=master"><img src="https://coveralls.io/repos/github/cdaringe/pouchy/badge.svg?branch=master" alt="Coverage Status"></a></p>
<p><a href="https://nodei.co/npm/pouchy/"><img src="https://nodei.co/npm/pouchy.png?downloads=true&amp;downloadRank=true&amp;stars=true" alt="NPM"></a></p>
<h2>what</h2><p>simple, enhanced <a href="https://github.com/pouchdb/pouchdb">PouchDB</a>.  <code>Pouchy</code> wraps &amp; extends <code>PouchDB</code> and provides various sorely needed sugar methods.  further, it assists by standardizing the returned document format.  most methods provided are <em>very</em> simple PouchDB-native method modifiers, but are targeted to save you frequent boilerplate re-typing!  this library also proxies most of the PouchDB API directly, so you can use it like a Pouch itself!</p>
<h2>how</h2><p>api docs and examples officially live <a href="http://cdaringe.github.io/pouchy/">here!</a></p>
<p>however, here are some basic examples:</p>
<pre class="prettyprint source lang-js"><code>// local, node database
const Pouchy = require('pouchy')
const level = require('pouchdb-adapter-leveldb')
Pouchy.plugin(level)

const fruit = new Pouchy({ name: 'fruit' })
fruit
.save({ type: 'orange', tastes: 'delicious' })
.then((orange) => console.log(orange))

/**
  {
    type: 'orange',
    tastes: 'delicious',
    _id: 'EA1F2B55-2482-89C6-907E-6F938C59F734',
    _rev: '1-f60b9b7d775a89d280e1f4c07122b863'
  }
*/</code></pre><pre class="prettyprint source lang-js"><code>// local & remote replicated database!
const Pouchy = require('pouchy')
const memory = require('pouchdb-adapter-memory')
Pouchy.plugin(memory)

const customers = new Pouchy({
  name: 'customers',
  replicate: 'sync',
  url: 'http://mydomain.org/db/customers'
})
customers.save({ firstName: 'bill', lastName: 'brasky' })
// wait for it... and couchdb/pouchdb-server @ http://mydomain.org/db/customers
// will receive bill brasky!</code></pre><h2>why</h2><p>why use <code>pouchy</code> over <code>pouchdb</code>?</p>
<ul>
<li>because managing <code>_id</code> and <code>_rev</code> can be seriously obnoxious with pouchdb (no hard feelings, of course).<ul>
<li>pouchdb methods return document <code>_id</code>s and <code>_rev</code>s inconsistently.  some methods return docs with an <code>id</code> attribute.  some return docs with <code>_id</code>.  the same happens for <code>rev</code>.</li>
<li>different methods return <code>_rev</code> nested under <em>other attributes</em>, vs. being at the top of the document.</li>
<li>pouchy lets you get your documents back <em>in the same way they are represented in the store</em>.  if you are expecting an <code>_id</code> and a <code>_rev</code> in a return result, you'll get those attributes back on the top of your documents, every time.</li>
</ul>
</li>
<li>because you need some frequently used sugar methods that aren't keys-included from pouchdb.  <strong>there are many sugar methods available</strong>, make sure to check out the API docs!<ul>
<li>e.g. <code>.all()</code>, to get all full documents in your store, in a simple array.</li>
<li>e.g. <code>.clear()/.deleteAll()</code> to purge your store of its docs.</li>
</ul>
</li>
<li>because you want <code>.find</code> to return simply an array of docs!<ul>
<li>note: pouchy pre-loads the <code>pouchdb-find</code> plugin, which is super handy and regularly recommended for use.</li>
</ul>
</li>
<li>because you want to pre-define *ouchdb synchronization behavior on construction!  start syncing pronto, declaratively!</li>
</ul>
<p>&quot;Hey, are those alone sufficient justification to wrap pouchdb?&quot;</p>
<p>Yea, it's definitely subjective, but my team and i have answered that powerfully with a &quot;yes, definitely!&quot;</p>
<p>Thanks! <a href="http://cdaringe.com/">cdaringe</a></p>
<h1>changelog</h1><ul>
<li>12.0.0<ul>
<li>refactor all of the things!<ul>
<li>better handle all <code>rev/id</code> ==&gt; <code>_rev/_id</code> mapping</li>
<li><strong>if <code>rev</code> or <code>id</code> exist on docs returned from pouch exist, but no <code>_rev</code> or <code>_id</code> exist, that particular kv pair will be moved to the <code>_</code>-prefixed key and the non prefixed key will be removed</strong>.</li>
</ul>
</li>
<li>more tests!</li>
</ul>
</li>
<li>11.0.2<ul>
<li>drop es6 content. es5 friendly-ify!</li>
</ul>
</li>
<li>11.0.0<ul>
<li>pouchdb 6.0.5!</li>
</ul>
</li>
<li>10.1.0<ul>
<li>expose replication options via <code>getReplicationOptions</code></li>
<li>on <code>destroy</code>, <em>actually</em> destroy gracefully.  that means, don't resolve the promise/callback until <code>live</code> dbs have all http requests fully settled. see <a href="https://github.com/pouchdb/express-pouchdb/issues/316#issuecomment-241247448">here</a> for more info.</li>
</ul>
</li>
<li>10.0.4 - be compatible with latest bluebird <code>.asCallback</code>.</li>
<li>10.0.0 - migrate to PouchDB 5.4.x.  @NOTE, some APIs are not available by default anymore.  See <a href="https://pouchdb.com/custom.html">the custom build</a> blog post on how to add features to your pouch <code>Pouchy.PouchDB.plugin(...)</code>.  The following plugins are available by default:<ul>
<li>pouchdb-adapter-http</li>
<li>pouchdb-find</li>
<li>pouchdb-replication</li>
</ul>
</li>
<li>9.0.2 - fix <code>bulkGet</code> when no docs are provided</li>
<li>9.0.0-1<ul>
<li>fix <code>.all({ include_docs: false })</code> to properly handle <code>.rev/._rev</code></li>
<li>improve docs!</li>
</ul>
</li>
<li>8.0.5 - fix issues w/ promise/cbs. sorry for 8.0.x-8.0.5 churn!</li>
<li>8.0.0 - support cb &amp; promise interface.  added bluebird to make this seamless and less verbose</li>
<li>7.1.0 - add <code>hasLikelySynced</code> event</li>
<li>7.0.0 - modify replicate API.  dropped <code>'both'</code> sync option, added <code>{}</code> option.  dropped <code>replicateLive</code></li>
<li>6.3.0 - add <code>destroy</code>, which <code>.cancel</code>s any replication from <code>.syncEmitter</code> (see <code>replicate</code>). deprecate 6.2.0-1. changeEmitter =&gt; syncEmitter (rapid patch, so no major bump)</li>
<li>6.2.1 - add <code>this.syncEmitter</code> when using the <code>replicate</code> API</li>
<li>6.1.0 - add <code>bulkGet</code></li>
<li>6.0.6 - fix issue where <code>_id</code> was still <code>id</code> when doing <code>.all({ include_docs: false })</code></li>
<li>6.0.4 - fix replication issue where db backend not honored</li>
<li>6.0.0 - db will store locally via leveldown as <code>name</code> if passed. <code>url</code> will still be used for replication if requested.  prior versions preferred <code>url</code> to the Pouch constructor over name</li>
<li>5.2.1 - permit / in couchdb db name</li>
<li>5.2.0 - bump with couch</li>
<li>5.1.0 - deps bump &amp; add cb interface</li>
<li>5.0.0 - deps bump only.  <del>all future releases with track major version #s with PouchDB</del></li>
<li>4.0.0 - major bump with PouchDB</li>
<li>3.0.0 - remove default <code>changes</code>, and associated <code>on/off</code>. didn't work out-of-the-box anyway.  may return in 4.x</li>
<li>2.0.1 - Don't modify constructor opts.name</li>
<li>2.0.0 - Fix synced db <code>fs</code> location. Previously was not honoring <code>path</code> option</li>
<li>1.0.0 - 2.0.1 pouchdb-wrapper =&gt; pouchy</li>
</ul></article>
    </section>






</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>